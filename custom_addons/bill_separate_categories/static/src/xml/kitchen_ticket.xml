<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-extend="OrderChangeReceipt">
        <t t-jquery="receipt" t-operation="replace">

        <receipt
            align="center"
            width="40"
            size="double-height"
            line-ratio="0.4"
            value-decimals="3"
            value-thousands-separator=""
            value-autoint="on">

                <div style="width: 40%; font-size: 8px;">
                    <div size="normal">
                        <strong><t t-esc="changes.name" /></strong>
                    </div>
                    <t t-if="changes.floor">
                        <strong><t t-esc="changes.labeltext.Floor" /><t t-esc="changes.floor" /></strong>
                    </t>
                    <br/>
                    <t t-if="changes.table">
                        <strong><t t-esc="changes.labeltext.Table" /></strong><t t-esc="changes.table" />
                    </t>
                    <t class="Cancelled">
                        <t t-if="changes.cancelled.length > 0">
                            <div style="color: red;">
                                <div bold="on" size="double"><strong><t t-esc="changes.labeltext.CANCELLED" /> </strong><span bold="off" size="double-height"><t t-esc="changes.time.today" />~<t t-esc="changes.time.hours" />:<t t-esc="changes.time.minutes" /></span></div>
                                <t t-if="changes.separate_category">
                                    <t t-foreach="changes.list_pos_category" t-as="pos_category">
                                        <t t-foreach="changes.list_product_category_cancelled" t-as="category">
                                            <t t-if="category[0] == pos_category">
                                                <div>..............................................................</div>
                                                <div style="text-align: center;"><strong><t t-esc="category[1]"/></strong></div>
                                                <t t-foreach="changes.cancelled" t-as="change">
                                                    <t t-if="change.categ[1] === category[1]">
                                                        <div style="text-decoration: line-through;">
                                                            <t t-esc="change.name_wrapped[0]" />
                                                            <t t-foreach="change.name_wrapped.slice(1)" t-as="wrapped_line">
                                                                <t t-esc="wrapped_line"/>
                                                            </t>
                                                            ~<t t-esc="change.qty"/>
                                                        </div>
                                                        <t t-if="change.note">
                                                            <div><span font="b" bold="off" line-ratio="0.4" indent="1" width="30">--- <t t-esc="change.note" /></span></div>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-else="">
                                    <div>..............................................................</div>
                                    <t t-foreach="changes.cancelled" t-as="change">
                                        <div style="text-decoration: line-through;">
                                            <t t-esc="change.name_wrapped[0]" />
                                            <t t-foreach="change.name_wrapped.slice(1)" t-as="wrapped_line">
                                                <t t-esc="wrapped_line"/>
                                            </t>
                                            ~<t t-esc="change.qty"/>
                                        </div>
                                        <t t-if="change.note">
                                            <div><span font="b" bold="off" line-ratio="0.4" indent="1" width="30">--- <t t-esc="change.note" /></span></div>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="changes.new.length > 0">
                                    <div>..............................................................</div>
                                </t>
                                <t t-else="">
                                    <div><t t-esc="changes.labeltext.End" /></div>
                                </t>
                            </div>
                        </t>
                    </t>
                    <br />
                    <t class="NEW">
                        <t t-if="changes.new.length > 0">
                            <div>
                                <div bold="on" size="double"><strong><t t-esc="changes.labeltext.NEW" /> </strong><span bold="off" size="double-height"><t t-esc="changes.time.today" />~<t t-esc="changes.time.hours" />:<t t-esc="changes.time.minutes" /></span></div>
                                <t t-if="changes.separate_category">
                                    <t t-foreach="changes.list_pos_category" t-as="pos_category">
                                        <t t-foreach="changes.list_product_category_new" t-as="category">
                                            <t t-if="category[0] == pos_category">
                                                <div>..............................................................</div>
                                                <div style="text-align: center;"><strong><t t-esc="category[1]"/></strong></div>
                                                <t t-foreach="changes.new" t-as="change">
                                                    <t t-if="change.categ[1] === category[1]">
                                                        <div>
                                                            <t t-esc="change.name_wrapped[0]" />
                                                            <t t-foreach="change.name_wrapped.slice(1)" t-as="wrapped_line">
                                                                <t t-esc="wrapped_line"/>
                                                            </t>
                                                            ~<t t-esc="change.qty"/>
                                                        </div>
                                                        <t t-if="change.note">
                                                            <div><span font="b" bold="off" line-ratio="0.4" indent="1" width="30">--- <t t-esc="change.note" /></span></div>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                                <t t-else="">
                                    <div>..............................................................</div>
                                    <t t-foreach="changes.new" t-as="change">
                                            <div>
                                                <t t-esc="change.name_wrapped[0]" />
                                                <t t-foreach="change.name_wrapped.slice(1)" t-as="wrapped_line">
                                                    <t t-esc="wrapped_line"/>
                                                </t>
                                                ~<t t-esc="change.qty"/>
                                            </div>
                                        <t t-if="change.note">
                                            <div><span font="b" bold="off" line-ratio="0.4" indent="1" width="30">--- <t t-esc="change.note" /></span></div>
                                        </t>
                                    </t>
                                </t>
                                <div><t t-esc="changes.labeltext.End" /></div>
                                <br />
                            </div>
                        </t>
                    </t>
                </div>
        </receipt>
        </t>
    </t>
</templates>